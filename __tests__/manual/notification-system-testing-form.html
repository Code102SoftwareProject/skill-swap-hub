<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notification System Test Case Execution Form</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #006699 0%, #0099cc 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #006699 0%, #004466 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .controls {
            background: #f8fafc;
            padding: 20px 30px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-group label {
            font-weight: 600;
            color: #374151;
        }

        select, input {
            padding: 8px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #006699;
        }

        .btn {
            padding: 10px 20px;
            background: #006699;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #004466;
        }

        .btn-secondary {
            background: #6b7280;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .form-section {
            padding: 30px;
        }

        .test-case {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            transition: all 0.3s;
        }

        .test-case:hover {
            border-color: #006699;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 102, 153, 0.1);
        }

        .test-case-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .test-case-id {
            font-weight: 700;
            color: #006699;
            font-size: 1.1rem;
        }

        .priority {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .priority.high {
            background: #fef2f2;
            color: #dc2626;
        }

        .priority.medium {
            background: #fffbeb;
            color: #d97706;
        }

        .priority.low {
            background: #f0f9ff;
            color: #0284c7;
        }

        .test-objective {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 15px;
        }

        .test-steps {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .test-steps h4 {
            color: #374151;
            margin-bottom: 10px;
        }

        .test-steps ol {
            margin-left: 20px;
        }

        .test-steps li {
            margin-bottom: 5px;
            color: #6b7280;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .form-field {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-field label {
            font-weight: 600;
            color: #374151;
        }

        .form-field input, .form-field select, .form-field textarea {
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-field input:focus, .form-field select:focus, .form-field textarea:focus {
            outline: none;
            border-color: #006699;
        }

        .form-field textarea {
            resize: vertical;
            min-height: 80px;
        }

        .status-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .status-btn {
            padding: 8px 16px;
            border: 2px solid transparent;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .status-btn.pass {
            background: #dcfce7;
            color: #16a34a;
            border-color: #16a34a;
        }

        .status-btn.fail {
            background: #fef2f2;
            color: #dc2626;
            border-color: #dc2626;
        }

        .status-btn.blocked {
            background: #fef3c7;
            color: #d97706;
            border-color: #d97706;
        }

        .status-btn.active {
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transform: translateY(-1px);
        }

        .summary-section {
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
            padding: 30px;
            margin-top: 30px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .summary-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #e2e8f0;
        }

        .summary-card h3 {
            color: #374151;
            margin-bottom: 10px;
        }

        .summary-card .number {
            font-size: 2rem;
            font-weight: 700;
            color: #006699;
        }

        .hidden {
            display: none;
        }

        .search-box {
            position: relative;
            flex: 1;
            max-width: 400px;
        }

        .search-box input {
            width: 100%;
            padding-left: 40px;
        }

        .search-box::before {
            content: "üîç";
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
        }

        .test-data {
            background: #f0f9ff;
            border: 1px solid #0284c7;
            border-radius: 6px;
            padding: 10px;
            margin-top: 10px;
            font-size: 12px;
        }

        .test-data h5 {
            color: #0284c7;
            margin-bottom: 5px;
        }

        .test-data ul {
            margin-left: 15px;
        }

        .category-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            margin-right: 10px;
        }

        .category-badge.authentication { background: #ddd6fe; color: #7c3aed; }
        .category-badge.display { background: #dcfce7; color: #16a34a; }
        .category-badge.actions { background: #fef3c7; color: #d97706; }
        .category-badge.realtime { background: #dbeafe; color: #2563eb; }
        .category-badge.sorting { background: #fed7d7; color: #dc2626; }
        .category-badge.errors { background: #e0e7ff; color: #4338ca; }
        .category-badge.responsive { background: #fee2e2; color: #ef4444; }
        .category-badge.themes { background: #fdf4ff; color: #c026d3; }
        .category-badge.performance { background: #f0fdf4; color: #22c55e; }
        .category-badge.accessibility { background: #f1f5f9; color: #64748b; }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .control-group {
                justify-content: space-between;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .test-case-header {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Notification System Test Execution</h1>
            <p>Comprehensive manual testing form for Skill Swap Hub notification system</p>
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="tester">Tester:</label>
                <input type="text" id="tester" placeholder="Enter tester name">
            </div>
            <div class="control-group">
                <label for="version">Version:</label>
                <input type="text" id="version" placeholder="e.g., v1.0.0">
            </div>
            <div class="control-group">
                <label for="browser">Browser:</label>
                <select id="browser">
                    <option value="">Select browser</option>
                    <option value="chrome">Chrome</option>
                    <option value="firefox">Firefox</option>
                    <option value="safari">Safari</option>
                    <option value="edge">Edge</option>
                </select>
            </div>
            <div class="control-group">
                <label for="device">Device:</label>
                <select id="device">
                    <option value="">Select device</option>
                    <option value="desktop">Desktop</option>
                    <option value="tablet">Tablet</option>
                    <option value="mobile">Mobile</option>
                </select>
            </div>
            <div class="control-group">
                <label for="category">Category:</label>
                <select id="category">
                    <option value="">All Categories</option>
                    <option value="authentication">Authentication</option>
                    <option value="display">Display & UI</option>
                    <option value="actions">Actions</option>
                    <option value="realtime">Real-time</option>
                    <option value="sorting">Sorting</option>
                    <option value="errors">Error Handling</option>
                    <option value="responsive">Responsive</option>
                    <option value="themes">Themes</option>
                    <option value="performance">Performance</option>
                    <option value="accessibility">Accessibility</option>
                </select>
            </div>
            <div class="control-group">
                <label for="priority">Priority:</label>
                <select id="priority">
                    <option value="">All Priorities</option>
                    <option value="high">High</option>
                    <option value="medium">Medium</option>
                    <option value="low">Low</option>
                </select>
            </div>
            <div class="search-box">
                <input type="text" id="search" placeholder="Search test cases...">
            </div>
            <button class="btn" onclick="exportResults()">Export CSV</button>
            <button class="btn" onclick="exportAsTable()">Export Table</button>
            <button class="btn btn-secondary" onclick="resetForm()">Reset All</button>
        </div>

        <div class="form-section">
            <div id="testCases">
                <!-- Test cases will be populated here -->
            </div>
        </div>

        <div class="summary-section">
            <h2>Test Execution Summary</h2>
            <div class="summary-grid">
                <div class="summary-card">
                    <h3>Total Tests</h3>
                    <div class="number" id="totalTests">0</div>
                </div>
                <div class="summary-card">
                    <h3>Passed</h3>
                    <div class="number" id="passedTests" style="color: #16a34a;">0</div>
                </div>
                <div class="summary-card">
                    <h3>Failed</h3>
                    <div class="number" id="failedTests" style="color: #dc2626;">0</div>
                </div>
                <div class="summary-card">
                    <h3>Blocked</h3>
                    <div class="number" id="blockedTests" style="color: #d97706;">0</div>
                </div>
                <div class="summary-card">
                    <h3>Not Executed</h3>
                    <div class="number" id="notExecutedTests" style="color: #6b7280;">0</div>
                </div>
                <div class="summary-card">
                    <h3>Pass Rate</h3>
                    <div class="number" id="passRate">0%</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Test cases data for notification system
        const testCases = [
            // Authentication & Page Loading
            {
                id: "TC-AUTH-001",
                title: "Authenticated User Access",
                objective: "Verify that authenticated users can access the notification page",
                category: "authentication",
                priority: "high",
                preconditions: "User is logged in with valid credentials",
                steps: [
                    "Navigate to /user/notification",
                    "Observe the page loading behavior",
                    "Check for user greeting message",
                    "Verify navbar and components load"
                ],
                expectedResult: "Page loads successfully, navbar displayed, user greeting shows 'Hi {firstName}, here are your notifications:', loading spinner appears briefly, no authentication errors",
                testData: ["Valid user account", "Active session token"]
            },
            {
                id: "TC-AUTH-002",
                title: "Unauthenticated User Redirect",
                objective: "Verify that unauthenticated users are redirected to login",
                category: "authentication",
                priority: "high",
                preconditions: "User is not logged in",
                steps: [
                    "Navigate directly to /user/notification",
                    "Observe the redirect behavior",
                    "Log in with valid credentials",
                    "Check if redirected back to notification page"
                ],
                expectedResult: "User redirected to /login?redirect=/user/notification, after login user redirected back to notification page",
                testData: ["No authentication token", "Valid login credentials"]
            },
            {
                id: "TC-AUTH-003",
                title: "Invalid User ID Handling",
                objective: "Verify handling of missing user identification",
                category: "authentication",
                priority: "medium",
                preconditions: "Corrupted or missing user data in session",
                steps: [
                    "Access page with invalid user session",
                    "Observe error handling and messages",
                    "Check for infinite loading states"
                ],
                expectedResult: "Error message: 'Could not identify user. Please log in again.', no infinite loading, user prompted to re-authenticate",
                testData: ["Corrupted session data", "Missing user ID"]
            },

            // Display & UI Testing
            {
                id: "TC-DISP-001",
                title: "Empty Notification State",
                objective: "Verify the display when no notifications exist",
                category: "display",
                priority: "medium",
                preconditions: "User has no notifications in database",
                steps: [
                    "Access notification page",
                    "Wait for page to load completely",
                    "Check for empty state message and icon",
                    "Verify no notification count badge"
                ],
                expectedResult: "Bell icon with 'You have no notifications yet' message displayed, no notification count badge, 'Mark all as read' button not visible, sort dropdown not visible",
                testData: ["User account with 0 notifications"]
            },
            {
                id: "TC-DISP-002",
                title: "Notifications with Unread Items",
                objective: "Verify display of notifications with unread items",
                category: "display",
                priority: "high",
                preconditions: "User has both read and unread notifications",
                steps: [
                    "Access notification page",
                    "Observe layout and organization",
                    "Check unread count badge",
                    "Verify section separation"
                ],
                expectedResult: "Unread count badge displays correct number, 'Unread' section appears first with Inbox icon, 'Read' section below with History icon, unread notifications have colored left border, read notifications have gray styling",
                testData: ["Mix of read/unread notifications", "Various notification types"]
            },
            {
                id: "TC-DISP-003",
                title: "Notification Information Display",
                objective: "Verify all notification details are displayed correctly",
                category: "display",
                priority: "high",
                preconditions: "User has various types of notifications",
                steps: [
                    "Access notification page",
                    "Examine individual notification items",
                    "Check type badges, descriptions, timestamps",
                    "Verify info icons and colors"
                ],
                expectedResult: "Each notification shows: type badge with appropriate color, description text, formatted timestamp (e.g., 'Jan 15, 2:30 PM'), info icon with type color, action buttons when applicable",
                testData: ["Different notification types", "Various timestamps", "Different colors"]
            },
            {
                id: "TC-DISP-004",
                title: "Date Formatting Consistency",
                objective: "Verify date formatting across different locales and times",
                category: "display",
                priority: "low",
                preconditions: "Notifications with various timestamps",
                steps: [
                    "Check notifications from different time periods",
                    "Verify format consistency (MMM dd, h:mm a)",
                    "Test with different browser locale settings"
                ],
                expectedResult: "All dates formatted consistently using date-fns format, readable format maintained across locales",
                testData: ["Recent notifications", "Older notifications", "Different timezone notifications"]
            },

            // Notification Actions
            {
                id: "TC-ACT-001",
                title: "Mark Single Notification as Read",
                objective: "Verify marking individual notifications as read",
                category: "actions",
                priority: "high",
                preconditions: "User has unread notifications",
                steps: [
                    "Locate an unread notification",
                    "Click 'Mark Read' button",
                    "Observe immediate UI changes",
                    "Verify server request completion"
                ],
                expectedResult: "Notification moves from 'Unread' to 'Read' section, visual styling changes to read state, 'Mark Read' button disappears, unread count decreases by 1, server request made to /api/notification/read",
                testData: ["Unread notification IDs", "Valid auth token"]
            },
            {
                id: "TC-ACT-002",
                title: "Mark All Notifications as Read",
                objective: "Verify bulk marking of all notifications as read",
                category: "actions",
                priority: "high",
                preconditions: "User has multiple unread notifications",
                steps: [
                    "Click 'Mark all as read' button",
                    "Observe bulk changes",
                    "Check unread count and button visibility",
                    "Verify server communication"
                ],
                expectedResult: "All notifications move to 'Read' section, unread count badge disappears, 'Mark all as read' button disappears, all notifications show read styling, server request to /api/notification/read-all",
                testData: ["Multiple unread notifications", "User ID for bulk operation"]
            },
            {
                id: "TC-ACT-003",
                title: "View Notification Target",
                objective: "Verify navigation to notification target destination",
                category: "actions",
                priority: "medium",
                preconditions: "Notification has targetDestination property",
                steps: [
                    "Locate notification with 'View' button",
                    "Click 'View' button",
                    "Observe navigation behavior",
                    "Verify correct destination"
                ],
                expectedResult: "User navigated to target destination URL, navigation occurs in same window, correct page loads",
                testData: ["Notifications with targetDestination", "Valid destination URLs"]
            },
            {
                id: "TC-ACT-004",
                title: "Action Button States",
                objective: "Verify action button states for different notification types",
                category: "actions",
                priority: "medium",
                preconditions: "Notifications with and without targetDestination",
                steps: [
                    "Check read notifications for button visibility",
                    "Check unread notifications for available actions",
                    "Verify buttons for notifications without targets"
                ],
                expectedResult: "Read notifications don't show 'Mark Read' button, unread show 'Mark Read', 'View' only appears when targetDestination exists",
                testData: ["Read notifications", "Unread notifications", "Notifications with/without targets"]
            },

            // Real-time Notifications
            {
                id: "TC-RT-001",
                title: "Receive New Notification",
                objective: "Verify real-time notification reception",
                category: "realtime",
                priority: "high",
                preconditions: "Socket connection established, notification trigger available",
                steps: [
                    "Keep notification page open",
                    "Trigger notification from another user/admin",
                    "Observe real-time updates",
                    "Check for duplicates"
                ],
                expectedResult: "New notification appears immediately at top of unread list, unread count badge increments, no duplicate notifications appear, socket connection verified in dev tools",
                testData: ["Socket.io connection", "Test notification triggers"]
            },
            {
                id: "TC-RT-002",
                title: "Socket Connection Handling",
                objective: "Verify behavior with socket connection issues",
                category: "realtime",
                priority: "high",
                preconditions: "Ability to simulate network issues",
                steps: [
                    "Access notification page",
                    "Simulate network disconnection",
                    "Reconnect network",
                    "Test notifications during/after reconnection"
                ],
                expectedResult: "Page gracefully handles connection loss, notifications received after reconnection appear correctly, no JavaScript errors, connection status can be monitored",
                testData: ["Network simulation tools", "Connection status indicators"]
            },
            {
                id: "TC-RT-003",
                title: "Duplicate Prevention",
                objective: "Verify duplicate notification prevention works",
                category: "realtime",
                priority: "medium",
                preconditions: "Real-time notification system active",
                steps: [
                    "Trigger same notification multiple times quickly",
                    "Check for duplicate detection logic",
                    "Verify deduplication by ID and timestamp"
                ],
                expectedResult: "Duplicate notifications prevented, only one instance appears, deduplication works by ID and description+timestamp proximity",
                testData: ["Identical notification payloads", "Close timestamp notifications"]
            },

            // Sorting and Filtering
            {
                id: "TC-SORT-001",
                title: "Sort by Newest First (Default)",
                objective: "Verify default sorting behavior",
                category: "sorting",
                priority: "medium",
                preconditions: "User has multiple notifications with different timestamps",
                steps: [
                    "Access notification page",
                    "Observe notification order",
                    "Check sort dropdown default value",
                    "Verify most recent at top"
                ],
                expectedResult: "Notifications sorted with newest first, sort dropdown shows 'Newest First', most recent notification appears at top of each section",
                testData: ["Notifications with varying timestamps", "Mix of recent and old notifications"]
            },
            {
                id: "TC-SORT-002",
                title: "Sort by Oldest First",
                objective: "Verify oldest first sorting functionality",
                category: "sorting",
                priority: "medium",
                preconditions: "User has multiple notifications",
                steps: [
                    "Click sort dropdown",
                    "Select 'Oldest First'",
                    "Observe notification reordering",
                    "Verify order maintained in sections"
                ],
                expectedResult: "Notifications reorder with oldest first, order maintained within read/unread sections, sort preference retained during session",
                testData: ["Multiple notifications", "Different creation timestamps"]
            },
            {
                id: "TC-SORT-003",
                title: "Sort Persistence",
                objective: "Verify sort preference persistence during session",
                category: "sorting",
                priority: "low",
                preconditions: "Notification page with sort options",
                steps: [
                    "Change sort order",
                    "Navigate away from page",
                    "Return to notification page",
                    "Check if sort preference maintained"
                ],
                expectedResult: "Sort preference maintained during session, consistent behavior across page refreshes",
                testData: ["Session storage capabilities", "Navigation testing"]
            },

            // Error Handling
            {
                id: "TC-ERR-001",
                title: "API Error Handling",
                objective: "Verify error handling for failed API requests",
                category: "errors",
                priority: "high",
                preconditions: "Ability to simulate API failures",
                steps: [
                    "Simulate API failure for notification fetch",
                    "Observe error display and handling",
                    "Check error message clarity",
                    "Test recovery options"
                ],
                expectedResult: "Red error banner appears with appropriate message, loading state cleared, user can retry by refreshing page, no infinite error loops",
                testData: ["API failure simulation", "Network error conditions"]
            },
            {
                id: "TC-ERR-002",
                title: "Mark as Read Failure Recovery",
                objective: "Verify rollback when mark as read fails",
                category: "errors",
                priority: "medium",
                preconditions: "Ability to simulate server errors",
                steps: [
                    "Click 'Mark Read' on notification",
                    "Simulate server error during request",
                    "Observe UI rollback behavior",
                    "Check error logging"
                ],
                expectedResult: "UI reverts notification to unread state, error logged to console, user can retry action, no permanent UI corruption",
                testData: ["Server error simulation", "Network interruption"]
            },
            {
                id: "TC-ERR-003",
                title: "Bulk Mark Read Failure Recovery",
                objective: "Verify rollback when mark all as read fails",
                category: "errors",
                priority: "medium",
                preconditions: "Multiple unread notifications, server error simulation",
                steps: [
                    "Click 'Mark all as read'",
                    "Simulate server failure",
                    "Observe bulk rollback",
                    "Verify data consistency"
                ],
                expectedResult: "All notifications revert to previous state, unread count restored, error logged, no partial state corruption",
                testData: ["Multiple unread notifications", "Server failure scenarios"]
            },

            // Responsive Design
            {
                id: "TC-RESP-001",
                title: "Mobile View Layout",
                objective: "Verify mobile responsiveness and usability",
                category: "responsive",
                priority: "high",
                preconditions: "Mobile device or browser dev tools",
                steps: [
                    "Access notification page on mobile viewport",
                    "Test all interactive elements",
                    "Check layout adaptation",
                    "Verify touch interactions"
                ],
                expectedResult: "Layout adapts to mobile screen, action buttons easily tappable, sort dropdown functions properly, text remains readable, no horizontal scrolling required",
                testData: ["Mobile viewport sizes", "Touch interaction testing"]
            },
            {
                id: "TC-RESP-002",
                title: "Tablet View Layout",
                objective: "Verify tablet responsiveness and layout",
                category: "responsive",
                priority: "medium",
                preconditions: "Tablet device or browser dev tools",
                steps: [
                    "Access notification page on tablet viewport",
                    "Test layout and interactions",
                    "Check space utilization",
                    "Verify flex layouts"
                ],
                expectedResult: "Layout uses available space efficiently, touch interactions work properly, flex layouts adjust appropriately, no layout breaking",
                testData: ["Tablet viewport sizes", "Various orientations"]
            },
            {
                id: "TC-RESP-003",
                title: "Desktop Responsiveness",
                objective: "Verify desktop layout and wide screen adaptation",
                category: "responsive",
                priority: "low",
                preconditions: "Desktop browser with various window sizes",
                steps: [
                    "Test different desktop window sizes",
                    "Check layout adaptation",
                    "Verify max-width constraints",
                    "Test ultrawide displays"
                ],
                expectedResult: "Layout maintains readability at all sizes, max-width constraints work, no excessive stretching on wide screens",
                testData: ["Various desktop resolutions", "Ultrawide displays"]
            },

            // Theme Support
            {
                id: "TC-THEME-001",
                title: "Dark Mode Display",
                objective: "Verify dark mode styling and readability",
                category: "themes",
                priority: "medium",
                preconditions: "Dark mode enabled in system/browser",
                steps: [
                    "Enable dark mode",
                    "Access notification page",
                    "Verify all elements display correctly",
                    "Check contrast and readability"
                ],
                expectedResult: "All text readable with proper contrast, background colors use dark theme, icons and borders adapt to dark mode, no elements appear broken or invisible",
                testData: ["Dark mode settings", "Color contrast verification"]
            },
            {
                id: "TC-THEME-002",
                title: "Theme Switching",
                objective: "Verify dynamic theme switching behavior",
                category: "themes",
                priority: "low",
                preconditions: "Ability to toggle theme while page is open",
                steps: [
                    "Access page in light mode",
                    "Switch to dark mode",
                    "Switch back to light mode",
                    "Check for visual artifacts"
                ],
                expectedResult: "Theme changes apply immediately, no visual artifacts remain from previous theme, all interactive elements continue to function",
                testData: ["Theme toggle functionality", "CSS transition testing"]
            },

            // Performance Testing
            {
                id: "TC-PERF-001",
                title: "Large Notification Count Performance",
                objective: "Verify performance with many notifications",
                category: "performance",
                priority: "medium",
                preconditions: "User account with 100+ notifications",
                steps: [
                    "Access notification page",
                    "Observe loading time and responsiveness",
                    "Test sorting and marking actions",
                    "Monitor browser performance"
                ],
                expectedResult: "Page loads within reasonable time (<3 seconds), scrolling is smooth, actions respond quickly, no browser freezing or lag",
                testData: ["100+ notifications", "Performance monitoring tools"]
            },
            {
                id: "TC-PERF-002",
                title: "Memory Usage Monitoring",
                objective: "Verify memory efficiency during extended use",
                category: "performance",
                priority: "low",
                preconditions: "Browser dev tools open",
                steps: [
                    "Keep notification page open for extended period",
                    "Receive multiple real-time notifications",
                    "Perform various actions repeatedly",
                    "Monitor memory usage in dev tools"
                ],
                expectedResult: "Memory usage remains stable, no significant memory leaks detected, performance doesn't degrade over time",
                testData: ["Memory profiling tools", "Extended usage scenarios"]
            },

            // Accessibility Testing
            {
                id: "TC-ACC-001",
                title: "Keyboard Navigation",
                objective: "Verify keyboard accessibility and navigation",
                category: "accessibility",
                priority: "medium",
                preconditions: "Keyboard-only navigation testing",
                steps: [
                    "Navigate to page using only Tab key",
                    "Activate buttons using Enter/Space",
                    "Test dropdown navigation",
                    "Verify focus indicators"
                ],
                expectedResult: "All interactive elements are focusable, focus indicators are visible, buttons can be activated with keyboard, dropdown accessible via keyboard",
                testData: ["Keyboard navigation patterns", "Focus indicator visibility"]
            },
            {
                id: "TC-ACC-002",
                title: "Screen Reader Compatibility",
                objective: "Verify screen reader support and announcements",
                category: "accessibility",
                priority: "low",
                preconditions: "Screen reader software available",
                steps: [
                    "Navigate page with screen reader",
                    "Listen to announcement of page content",
                    "Test button and element descriptions",
                    "Verify status change announcements"
                ],
                expectedResult: "Page structure announced clearly, notification content is readable, button purposes are clear, status changes are announced",
                testData: ["Screen reader software", "ARIA label verification"]
            },
            {
                id: "TC-ACC-003",
                title: "Color Contrast and Visual Accessibility",
                objective: "Verify color contrast meets accessibility standards",
                category: "accessibility",
                priority: "low",
                preconditions: "Color contrast testing tools",
                steps: [
                    "Test color contrast ratios",
                    "Verify information not conveyed by color alone",
                    "Check high contrast mode compatibility",
                    "Test with color blindness simulation"
                ],
                expectedResult: "Color contrast meets WCAG guidelines, information available beyond color, high contrast mode supported, color blind accessible",
                testData: ["Contrast testing tools", "Color blindness simulators"]
            }
        ];

        let currentTests = [...testCases];

        // Initialize the form
        function initializeForm() {
            renderTestCases();
            updateSummary();
            setupEventListeners();
        }

        // Render test cases
        function renderTestCases() {
            const container = document.getElementById('testCases');
            container.innerHTML = '';

            currentTests.forEach(testCase => {
                const testElement = createTestCaseElement(testCase);
                container.appendChild(testElement);
            });
        }

        // Create test case element
        function createTestCaseElement(testCase) {
            const div = document.createElement('div');
            div.className = 'test-case';
            div.dataset.id = testCase.id;
            div.dataset.category = testCase.category;
            div.dataset.priority = testCase.priority;

            const testDataHtml = testCase.testData && testCase.testData.length > 0 ? `
                <div class="test-data">
                    <h5>Test Data:</h5>
                    <ul>
                        ${testCase.testData.map(data => `<li>${data}</li>`).join('')}
                    </ul>
                </div>
            ` : '';

            div.innerHTML = `
                <div class="test-case-header">
                    <div>
                        <span class="test-case-id">${testCase.id}</span>
                        <span class="category-badge ${testCase.category}">${testCase.category}</span>
                    </div>
                    <div class="priority ${testCase.priority}">${testCase.priority}</div>
                </div>
                
                <div class="test-objective">${testCase.title}: ${testCase.objective}</div>
                
                <div class="test-steps">
                    <h4>Preconditions:</h4>
                    <p>${testCase.preconditions}</p>
                    <h4>Test Steps:</h4>
                    <ol>
                        ${testCase.steps.map(step => `<li>${step}</li>`).join('')}
                    </ol>
                    <h4>Expected Result:</h4>
                    <p>${testCase.expectedResult}</p>
                </div>

                ${testDataHtml}

                <div class="form-grid">
                    <div class="form-field">
                        <label>Actual Result:</label>
                        <textarea name="actualResult" placeholder="Describe what actually happened..."></textarea>
                    </div>
                    <div class="form-field">
                        <label>Test Status:</label>
                        <div class="status-buttons">
                            <button type="button" class="status-btn pass" onclick="setStatus(this, 'pass')">Pass</button>
                            <button type="button" class="status-btn fail" onclick="setStatus(this, 'fail')">Fail</button>
                            <button type="button" class="status-btn blocked" onclick="setStatus(this, 'blocked')">Blocked</button>
                        </div>
                        <input type="hidden" name="testResult" value="">
                    </div>
                    <div class="form-field">
                        <label>Execution Date:</label>
                        <input type="date" name="executionDate" value="${new Date().toISOString().split('T')[0]}">
                    </div>
                    <div class="form-field">
                        <label>Execution Time:</label>
                        <input type="time" name="executionTime" value="${new Date().toTimeString().slice(0,5)}">
                    </div>
                    <div class="form-field">
                        <label>Notes:</label>
                        <textarea name="notes" placeholder="Additional notes, observations, or comments..."></textarea>
                    </div>
                    <div class="form-field">
                        <label>Bug Severity (if failed):</label>
                        <select name="bugSeverity">
                            <option value="">N/A</option>
                            <option value="critical">Critical</option>
                            <option value="major">Major</option>
                            <option value="minor">Minor</option>
                            <option value="trivial">Trivial</option>
                        </select>
                    </div>
                </div>
            `;

            return div;
        }

        // Set test status
        function setStatus(button, status) {
            const testCase = button.closest('.test-case');
            const statusButtons = testCase.querySelectorAll('.status-btn');
            const hiddenInput = testCase.querySelector('input[name="testResult"]');

            statusButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            hiddenInput.value = status;

            updateSummary();
        }

        // Update summary statistics
        function updateSummary() {
            const testCaseElements = document.querySelectorAll('.test-case');
            let total = testCaseElements.length;
            let passed = 0;
            let failed = 0;
            let blocked = 0;
            let notExecuted = 0;

            testCaseElements.forEach(testCase => {
                const result = testCase.querySelector('input[name="testResult"]').value;
                switch(result) {
                    case 'pass': passed++; break;
                    case 'fail': failed++; break;
                    case 'blocked': blocked++; break;
                    default: notExecuted++; break;
                }
            });

            const passRate = total > 0 ? Math.round((passed / total) * 100) : 0;

            document.getElementById('totalTests').textContent = total;
            document.getElementById('passedTests').textContent = passed;
            document.getElementById('failedTests').textContent = failed;
            document.getElementById('blockedTests').textContent = blocked;
            document.getElementById('notExecutedTests').textContent = notExecuted;
            document.getElementById('passRate').textContent = passRate + '%';
        }

        // Filter test cases
        function filterTestCases() {
            const category = document.getElementById('category').value;
            const priority = document.getElementById('priority').value;
            const search = document.getElementById('search').value.toLowerCase();

            const testCaseElements = document.querySelectorAll('.test-case');
            
            testCaseElements.forEach(testCase => {
                const testCategory = testCase.dataset.category;
                const testPriority = testCase.dataset.priority;
                const testContent = testCase.textContent.toLowerCase();

                const categoryMatch = !category || testCategory === category;
                const priorityMatch = !priority || testPriority === priority;
                const searchMatch = !search || testContent.includes(search);

                if (categoryMatch && priorityMatch && searchMatch) {
                    testCase.style.display = 'block';
                } else {
                    testCase.style.display = 'none';
                }
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('category').addEventListener('change', filterTestCases);
            document.getElementById('priority').addEventListener('change', filterTestCases);
            document.getElementById('search').addEventListener('input', filterTestCases);
        }

        // Export results to CSV
        function exportResults() {
            const tester = document.getElementById('tester').value;
            const version = document.getElementById('version').value;
            const browser = document.getElementById('browser').value;
            const device = document.getElementById('device').value;
            const testDate = new Date().toISOString().split('T')[0];

            let csvContent = "Test Case ID,Test Name,Category,Priority,Preconditions,Test Steps,Expected Result,Actual Result,Test Status,Execution Date,Execution Time,Tester,Browser,Device,Notes,Bug Severity\n";

            document.querySelectorAll('.test-case').forEach(testCase => {
                const id = testCase.dataset.id;
                const testName = testCase.querySelector('.test-objective').textContent;
                const category = testCase.dataset.category;
                const priority = testCase.dataset.priority;
                const preconditions = testCase.querySelector('.test-steps p').textContent;
                const steps = Array.from(testCase.querySelectorAll('.test-steps ol li')).map(li => li.textContent).join('; ');
                const expectedResult = testCase.querySelectorAll('.test-steps p')[1].textContent;
                const actualResult = testCase.querySelector('textarea[name="actualResult"]').value;
                const testResult = testCase.querySelector('input[name="testResult"]').value;
                const executionDate = testCase.querySelector('input[name="executionDate"]').value;
                const executionTime = testCase.querySelector('input[name="executionTime"]').value;
                const notes = testCase.querySelector('textarea[name="notes"]').value;
                const bugSeverity = testCase.querySelector('select[name="bugSeverity"]').value;

                csvContent += `"${id}","${testName}","${category}","${priority}","${preconditions}","${steps}","${expectedResult}","${actualResult}","${testResult}","${executionDate}","${executionTime}","${tester}","${browser}","${device}","${notes}","${bugSeverity}"\n`;
            });

            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `notification_test_results_${testDate}.csv`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Export as HTML table
        function exportAsTable() {
            const tester = document.getElementById('tester').value;
            const version = document.getElementById('version').value;
            const browser = document.getElementById('browser').value;
            const device = document.getElementById('device').value;
            const testDate = new Date().toISOString().split('T')[0];

            let htmlContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Notification System Test Results</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .header { background: #006699; color: white; padding: 20px; text-align: center; }
                        .info { background: #f0f9ff; padding: 15px; margin: 20px 0; }
                        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
                        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                        th { background: #f8fafc; font-weight: bold; }
                        .pass { background: #dcfce7; }
                        .fail { background: #fef2f2; }
                        .blocked { background: #fef3c7; }
                        .summary { background: #f8fafc; padding: 20px; margin: 20px 0; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>Notification System Test Results</h1>
                        <p>Test Execution Report</p>
                    </div>
                    <div class="info">
                        <strong>Test Information:</strong><br>
                        Tester: ${tester}<br>
                        Version: ${version}<br>
                        Browser: ${browser}<br>
                        Device: ${device}<br>
                        Test Date: ${testDate}
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Test Case ID</th>
                                <th>Test Name</th>
                                <th>Category</th>
                                <th>Priority</th>
                                <th>Status</th>
                                <th>Notes</th>
                                <th>Bug Severity</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            document.querySelectorAll('.test-case').forEach(testCase => {
                const id = testCase.dataset.id;
                const testName = testCase.querySelector('.test-objective').textContent;
                const category = testCase.dataset.category;
                const priority = testCase.dataset.priority;
                const testResult = testCase.querySelector('input[name="testResult"]').value;
                const notes = testCase.querySelector('textarea[name="notes"]').value;
                const bugSeverity = testCase.querySelector('select[name="bugSeverity"]').value;

                htmlContent += `
                    <tr class="${testResult}">
                        <td>${id}</td>
                        <td>${testName}</td>
                        <td>${category}</td>
                        <td>${priority}</td>
                        <td>${testResult.toUpperCase()}</td>
                        <td>${notes}</td>
                        <td>${bugSeverity}</td>
                    </tr>
                `;
            });

            // Calculate summary
            const total = document.querySelectorAll('.test-case').length;
            const passed = document.getElementById('passedTests').textContent;
            const failed = document.getElementById('failedTests').textContent;
            const blocked = document.getElementById('blockedTests').textContent;
            const notExecuted = document.getElementById('notExecutedTests').textContent;
            const passRate = document.getElementById('passRate').textContent;

            htmlContent += `
                        </tbody>
                    </table>
                    <div class="summary">
                        <h2>Test Execution Summary</h2>
                        <p><strong>Total Tests:</strong> ${total}</p>
                        <p><strong>Passed:</strong> ${passed}</p>
                        <p><strong>Failed:</strong> ${failed}</p>
                        <p><strong>Blocked:</strong> ${blocked}</p>
                        <p><strong>Not Executed:</strong> ${notExecuted}</p>
                        <p><strong>Pass Rate:</strong> ${passRate}</p>
                    </div>
                </body>
                </html>
            `;

            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `notification_test_results_table_${testDate}.html`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Reset form
        function resetForm() {
            if (confirm('Are you sure you want to reset all test results?')) {
                document.querySelectorAll('.test-case').forEach(testCase => {
                    testCase.querySelector('textarea[name="actualResult"]').value = '';
                    testCase.querySelector('input[name="testResult"]').value = '';
                    testCase.querySelector('textarea[name="notes"]').value = '';
                    testCase.querySelector('select[name="bugSeverity"]').value = '';
                    testCase.querySelectorAll('.status-btn').forEach(btn => btn.classList.remove('active'));
                });
                updateSummary();
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeForm);
    </script>
</body>
</html>
