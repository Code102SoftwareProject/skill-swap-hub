<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session System Test Case Execution Form</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .controls {
            background: #f8fafc;
            padding: 20px 30px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-group label {
            font-weight: 600;
            color: #374151;
        }

        select, input {
            padding: 8px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #4f46e5;
        }

        .btn {
            padding: 10px 20px;
            background: #4f46e5;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #3730a3;
        }

        .btn-secondary {
            background: #6b7280;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .form-section {
            padding: 30px;
        }

        .test-case {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            transition: all 0.3s;
        }

        .test-case:hover {
            border-color: #4f46e5;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.1);
        }

        .test-case-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .test-case-id {
            font-weight: 700;
            color: #4f46e5;
            font-size: 1.1rem;
        }

        .priority {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .priority.high {
            background: #fef2f2;
            color: #dc2626;
        }

        .priority.medium {
            background: #fffbeb;
            color: #d97706;
        }

        .priority.low {
            background: #f0f9ff;
            color: #0284c7;
        }

        .test-objective {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 15px;
        }

        .test-steps {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .test-steps h4 {
            color: #374151;
            margin-bottom: 10px;
        }

        .test-steps ol {
            margin-left: 20px;
        }

        .test-steps li {
            margin-bottom: 5px;
            color: #6b7280;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .form-field {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-field label {
            font-weight: 600;
            color: #374151;
        }

        .form-field input, .form-field select, .form-field textarea {
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-field input:focus, .form-field select:focus, .form-field textarea:focus {
            outline: none;
            border-color: #4f46e5;
        }

        .form-field textarea {
            resize: vertical;
            min-height: 80px;
        }

        .status-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .status-btn {
            padding: 8px 16px;
            border: 2px solid transparent;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .status-btn.pass {
            background: #dcfce7;
            color: #16a34a;
            border-color: #16a34a;
        }

        .status-btn.fail {
            background: #fef2f2;
            color: #dc2626;
            border-color: #dc2626;
        }

        .status-btn.blocked {
            background: #fef3c7;
            color: #d97706;
            border-color: #d97706;
        }

        .status-btn.active {
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transform: translateY(-1px);
        }

        .summary-section {
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
            padding: 30px;
            margin-top: 30px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .summary-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #e2e8f0;
        }

        .summary-card h3 {
            color: #374151;
            margin-bottom: 10px;
        }

        .summary-card .number {
            font-size: 2rem;
            font-weight: 700;
            color: #4f46e5;
        }

        .hidden {
            display: none;
        }

        .search-box {
            position: relative;
            flex: 1;
            max-width: 400px;
        }

        .search-box input {
            width: 100%;
            padding-left: 40px;
        }

        .search-box::before {
            content: "üîç";
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
        }

        .test-data {
            background: #f0f9ff;
            border: 1px solid #0284c7;
            border-radius: 6px;
            padding: 10px;
            margin-top: 10px;
            font-size: 12px;
        }

        .test-data h5 {
            color: #0284c7;
            margin-bottom: 5px;
        }

        .test-data ul {
            margin-left: 15px;
        }

        .category-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            margin-right: 10px;
        }

        .category-badge.creation { background: #ddd6fe; color: #7c3aed; }
        .category-badge.acceptance { background: #dcfce7; color: #16a34a; }
        .category-badge.counter-offers { background: #fef3c7; color: #d97706; }
        .category-badge.progress { background: #dbeafe; color: #2563eb; }
        .category-badge.work { background: #fed7d7; color: #dc2626; }
        .category-badge.completion { background: #e0e7ff; color: #4338ca; }
        .category-badge.cancellation { background: #fee2e2; color: #ef4444; }
        .category-badge.reporting { background: #fdf4ff; color: #c026d3; }
        .category-badge.ui { background: #f0fdf4; color: #22c55e; }
        .category-badge.edge-cases { background: #f1f5f9; color: #64748b; }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .control-group {
                justify-content: space-between;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .test-case-header {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Session System Test Execution</h1>
            <p>Comprehensive manual testing form for Skill Swap Hub session system</p>
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="tester">Tester:</label>
                <input type="text" id="tester" placeholder="Enter tester name">
            </div>
            <div class="control-group">
                <label for="version">Version:</label>
                <input type="text" id="version" placeholder="e.g., v1.0.0">
            </div>
            <div class="control-group">
                <label for="browser">Browser:</label>
                <select id="browser">
                    <option value="">Select browser</option>
                    <option value="chrome">Chrome</option>
                    <option value="firefox">Firefox</option>
                    <option value="safari">Safari</option>
                    <option value="edge">Edge</option>
                </select>
            </div>
            <div class="control-group">
                <label for="device">Device:</label>
                <select id="device">
                    <option value="">Select device</option>
                    <option value="desktop">Desktop</option>
                    <option value="tablet">Tablet</option>
                    <option value="mobile">Mobile</option>
                </select>
            </div>
            <div class="control-group">
                <label for="category">Category:</label>
                <select id="category">
                    <option value="">All Categories</option>
                    <option value="creation">Session Creation</option>
                    <option value="acceptance">Acceptance/Rejection</option>
                    <option value="counter-offers">Counter Offers</option>
                    <option value="progress">Progress Tracking</option>
                    <option value="work">Work Submission</option>
                    <option value="completion">Session Completion</option>
                    <option value="cancellation">Cancellation</option>
                    <option value="reporting">Reporting</option>
                    <option value="ui">UI/UX</option>
                    <option value="edge-cases">Edge Cases</option>
                </select>
            </div>
            <div class="control-group">
                <label for="priority">Priority:</label>
                <select id="priority">
                    <option value="">All Priorities</option>
                    <option value="high">High</option>
                    <option value="medium">Medium</option>
                    <option value="low">Low</option>
                </select>
            </div>
            <div class="search-box">
                <input type="text" id="search" placeholder="Search test cases...">
            </div>
            <button class="btn" onclick="exportResults()">Export CSV</button>
            <button class="btn" onclick="exportAsTable()">Export Table</button>
            <button class="btn btn-secondary" onclick="resetForm()">Reset All</button>
        </div>

        <div class="form-section">
            <div id="testCases">
                <!-- Test cases will be populated here -->
            </div>
        </div>

        <div class="summary-section">
            <h2>Test Execution Summary</h2>
            <div class="summary-grid">
                <div class="summary-card">
                    <h3>Total Tests</h3>
                    <div class="number" id="totalTests">0</div>
                </div>
                <div class="summary-card">
                    <h3>Passed</h3>
                    <div class="number" id="passedTests" style="color: #16a34a;">0</div>
                </div>
                <div class="summary-card">
                    <h3>Failed</h3>
                    <div class="number" id="failedTests" style="color: #dc2626;">0</div>
                </div>
                <div class="summary-card">
                    <h3>Blocked</h3>
                    <div class="number" id="blockedTests" style="color: #d97706;">0</div>
                </div>
                <div class="summary-card">
                    <h3>Not Executed</h3>
                    <div class="number" id="notExecutedTests" style="color: #6b7280;">0</div>
                </div>
                <div class="summary-card">
                    <h3>Pass Rate</h3>
                    <div class="number" id="passRate">0%</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Test cases data
        const testCases = [
            // Session Creation & Management
            {
                id: "TC-SC-001",
                title: "Create New Session Request",
                objective: "Verify users can create new skill-swap session requests",
                category: "creation",
                priority: "high",
                preconditions: "User A and User B exist with skills, logged in, <3 active sessions",
                steps: [
                    "Go to User B's profile",
                    "Click 'New Session'",
                    "Select skills and enter description",
                    "Set dates and submit"
                ],
                expectedResult: "Session created as 'pending', notifications sent, appears in both user lists",
                testData: ["Valid IDs", "Description: 10+ chars", "Future dates"]
            },
            {
                id: "TC-SC-002",
                title: "Session Creation Validation",
                objective: "Verify session creation form validates required fields",
                category: "creation",
                priority: "high",
                preconditions: "User logged in with skills",
                steps: [
                    "Try missing fields, self-session, invalid IDs",
                    "Try past dates, 3+ active sessions"
                ],
                expectedResult: "Proper error messages, form blocks invalid submissions",
                testData: []
            },
            {
                id: "TC-SC-003",
                title: "Session List Display",
                objective: "Verify session list displays correctly",
                category: "creation",
                priority: "medium",
                preconditions: "Multiple sessions exist",
                steps: [
                    "Navigate to sessions page",
                    "Check status, sorting, user info, buttons"
                ],
                expectedResult: "Sessions grouped by status, correct info displayed, proper buttons",
                testData: []
            },

            // Session Acceptance & Rejection
            {
                id: "TC-AR-001",
                title: "Accept Session Request",
                objective: "Verify users can accept pending session requests",
                category: "acceptance",
                priority: "high",
                preconditions: "Pending session exists, receiver logged in",
                steps: [
                    "Go to session request",
                    "Click 'Accept' and confirm"
                ],
                expectedResult: "Status ‚Üí 'active', progress created, notifications sent",
                testData: []
            },
            {
                id: "TC-AR-002",
                title: "Reject Session Request",
                objective: "Verify users can reject pending session requests",
                category: "acceptance",
                priority: "high",
                preconditions: "Pending session exists, receiver logged in",
                steps: [
                    "Go to session request",
                    "Click 'Reject', add reason, confirm"
                ],
                expectedResult: "Status ‚Üí 'rejected', timestamp recorded, notifications sent",
                testData: []
            },
            {
                id: "TC-AR-003",
                title: "Edit Session Before Acceptance",
                objective: "Verify session creators can edit pending sessions",
                category: "acceptance",
                priority: "medium",
                preconditions: "User A created pending session",
                steps: [
                    "Go to pending session",
                    "Click 'Edit', modify, save"
                ],
                expectedResult: "Session updated, timestamp updated, User B sees changes",
                testData: []
            },

            // Counter Offers System
            {
                id: "TC-CO-001",
                title: "Create Counter Offer",
                objective: "Verify users can create counter offers",
                category: "counter-offers",
                priority: "medium",
                preconditions: "Session exists, user has permission",
                steps: [
                    "Go to session details",
                    "Click 'Counter Offer', modify terms, submit"
                ],
                expectedResult: "Counter offer created, linked to session, notifications sent",
                testData: []
            },
            {
                id: "TC-CO-002",
                title: "Accept Counter Offer",
                objective: "Verify users can accept counter offers",
                category: "counter-offers",
                priority: "medium",
                preconditions: "Counter offer exists",
                steps: [
                    "Go to session with counter offer",
                    "Click 'Accept Counter Offer', confirm"
                ],
                expectedResult: "Session updated with new terms, counter offer marked accepted",
                testData: []
            },
            {
                id: "TC-CO-003",
                title: "Reject Counter Offer",
                objective: "Verify users can reject counter offers",
                category: "counter-offers",
                priority: "medium",
                preconditions: "Counter offer exists",
                steps: [
                    "Go to session with counter offer",
                    "Click 'Reject', add reason, confirm"
                ],
                expectedResult: "Counter offer rejected, original terms remain, user notified",
                testData: []
            },

            // Progress Tracking
            {
                id: "TC-PT-001",
                title: "Update Session Progress",
                objective: "Verify users can update session progress",
                category: "progress",
                priority: "high",
                preconditions: "Active session, user is participant",
                steps: [
                    "Go to session Progress tab",
                    "Update percentage, status, notes, due date",
                    "Save changes"
                ],
                expectedResult: "Progress saved, other user sees updates, timeline updated",
                testData: ["0-100%", "Status: not_started, in_progress, completed, blocked"]
            },
            {
                id: "TC-PT-002",
                title: "View Progress Timeline",
                objective: "Verify progress timeline displays correctly",
                category: "progress",
                priority: "medium",
                preconditions: "Session with progress updates",
                steps: [
                    "Go to Progress tab",
                    "Check timeline, timestamps, notes"
                ],
                expectedResult: "Chronological timeline, both users shown, clear timestamps",
                testData: []
            },
            {
                id: "TC-PT-003",
                title: "Progress Notifications",
                objective: "Verify progress notifications work",
                category: "progress",
                priority: "medium",
                preconditions: "Active session with progress tracking",
                steps: [
                    "User A updates progress",
                    "Check User B gets notification"
                ],
                expectedResult: "Notification sent with progress percentage",
                testData: []
            },

            // Work Submission & Review
            {
                id: "TC-WS-001",
                title: "Submit Work",
                objective: "Verify users can submit work for review",
                category: "work",
                priority: "high",
                preconditions: "Active session, user has work",
                steps: [
                    "Go to 'Submit Work' tab",
                    "Enter title, description, upload files",
                    "Submit work"
                ],
                expectedResult: "Work created, files uploaded, other user notified",
                testData: ["File types: pdf, doc, txt, jpg, png", "Max: 25MB"]
            },
            {
                id: "TC-WS-002",
                title: "File Upload Validation",
                objective: "Verify file upload validation works",
                category: "work",
                priority: "high",
                preconditions: "Submit Work tab open",
                steps: [
                    "Try different file types, sizes",
                    "Test multiple uploads"
                ],
                expectedResult: "Only allowed types accepted, size limits enforced",
                testData: ["Allowed: pdf, doc, docx, txt, jpg, png, gif", "Max: 25MB"]
            },
            {
                id: "TC-WS-003",
                title: "Review Submitted Work",
                objective: "Verify users can review submitted work",
                category: "work",
                priority: "high",
                preconditions: "Work submitted",
                steps: [
                    "Go to 'View Works' tab",
                    "Select work, download files",
                    "Accept/reject with comments"
                ],
                expectedResult: "Work displayed correctly, files download, review recorded",
                testData: []
            },
            {
                id: "TC-WS-004",
                title: "Work Rejection Workflow",
                objective: "Verify work rejection provides feedback",
                category: "work",
                priority: "medium",
                preconditions: "Work submission exists",
                steps: [
                    "Review work",
                    "Click 'Reject', provide reason"
                ],
                expectedResult: "Work rejected, reason stored, submitter notified",
                testData: []
            },

            // Session Completion Flow
            {
                id: "TC-CF-001",
                title: "Request Session Completion",
                objective: "Verify users can request completion",
                category: "completion",
                priority: "high",
                preconditions: "Active session with progress",
                steps: [
                    "Go to session overview",
                    "Click 'Request Completion', confirm"
                ],
                expectedResult: "Completion request created, other user notified",
                testData: []
            },
            {
                id: "TC-CF-002",
                title: "Approve Session Completion",
                objective: "Verify users can approve completion",
                category: "completion",
                priority: "high",
                preconditions: "Completion request exists",
                steps: [
                    "Go to session with request",
                    "Click 'Approve Completion', confirm"
                ],
                expectedResult: "Status ‚Üí 'completed', notifications sent, rating available",
                testData: []
            },
            {
                id: "TC-CF-003",
                title: "Reject Completion Request",
                objective: "Verify users can reject completion",
                category: "completion",
                priority: "high",
                preconditions: "Completion request exists",
                steps: [
                    "Go to session with request",
                    "Click 'Reject', provide reason"
                ],
                expectedResult: "Request rejected, session remains active, reason provided",
                testData: []
            },
            {
                id: "TC-CF-004",
                title: "Post-Completion Rating",
                objective: "Verify users can rate after completion",
                category: "completion",
                priority: "medium",
                preconditions: "Session completed",
                steps: [
                    "Go to completed session",
                    "Rate 1-5 stars, write review"
                ],
                expectedResult: "Rating recorded, affects user's overall rating",
                testData: ["1-5 stars", "Comment: 10+ chars required"]
            },

            // Session Cancellation
            {
                id: "TC-CAN-001",
                title: "Cancel Active Session",
                objective: "Verify users can cancel sessions",
                category: "cancellation",
                priority: "high",
                preconditions: "Active session, user is participant",
                steps: [
                    "Go to active session",
                    "Click 'Cancel', provide reason, confirm"
                ],
                expectedResult: "Status ‚Üí 'canceled', other user notified, reason stored",
                testData: []
            },
            {
                id: "TC-CAN-002",
                title: "Cancel Request Workflow",
                objective: "Verify cancellation request system",
                category: "cancellation",
                priority: "medium",
                preconditions: "Session exists",
                steps: [
                    "User A requests cancellation",
                    "User B approves/rejects request"
                ],
                expectedResult: "Request system works, both users involved, clear communication",
                testData: []
            },

            // Reporting System
            {
                id: "TC-REP-001",
                title: "Report Session Issue",
                objective: "Verify users can report issues",
                category: "reporting",
                priority: "medium",
                preconditions: "Session exists, user experienced issue",
                steps: [
                    "Go to Report tab",
                    "Select category, describe, upload evidence"
                ],
                expectedResult: "Report created, admin notified, ID generated",
                testData: ["Categories: behavior, quality, communication, technical"]
            },
            {
                id: "TC-REP-002",
                title: "Report Categories",
                objective: "Verify all report categories work",
                category: "reporting",
                priority: "low",
                preconditions: "Report tab accessible",
                steps: [
                    "Test each category: behavior, quality, communication, technical, terms"
                ],
                expectedResult: "All categories selectable, sub-options available, guidance shown",
                testData: []
            },

            // UI/UX Components
            {
                id: "TC-UI-001",
                title: "Session Box Component",
                objective: "Verify session box interface works",
                category: "ui",
                priority: "medium",
                preconditions: "Users with sessions",
                steps: [
                    "Go to chat interface",
                    "Open session box, test elements"
                ],
                expectedResult: "Box loads, buttons work, limit shown, responsive",
                testData: []
            },
            {
                id: "TC-UI-002",
                title: "Session Workspace Tabs",
                objective: "Verify workspace tab navigation",
                category: "ui",
                priority: "medium",
                preconditions: "Active session",
                steps: [
                    "Go to session workspace",
                    "Test all tabs, check disabled states"
                ],
                expectedResult: "All tabs work, content loads, navigation smooth",
                testData: []
            },
            {
                id: "TC-UI-003",
                title: "Modal Components",
                objective: "Verify modal dialogs work",
                category: "ui",
                priority: "medium",
                preconditions: "Various modal actions",
                steps: [
                    "Test modals: Create, Edit, Counter Offer, Rating",
                    "Test ESC key and click-outside"
                ],
                expectedResult: "Modals open/close properly, validation works, data persists",
                testData: []
            },
            {
                id: "TC-UI-004",
                title: "Alert and Confirmation Dialogs",
                objective: "Verify alert systems work",
                category: "ui",
                priority: "low",
                preconditions: "Actions triggering alerts",
                steps: [
                    "Trigger alerts: success, error, warning, info",
                    "Test auto-close and manual close"
                ],
                expectedResult: "Alerts display correctly, auto-close works, clear messages",
                testData: []
            },

            // Edge Cases & Error Handling
            {
                id: "TC-EC-001",
                title: "Network Connectivity Issues",
                objective: "Verify system handles network issues",
                category: "edge-cases",
                priority: "medium",
                preconditions: "Session system loaded",
                steps: [
                    "Disconnect during session creation",
                    "Reconnect and retry"
                ],
                expectedResult: "Graceful error handling, data recovery works",
                testData: []
            },
            {
                id: "TC-EC-002",
                title: "Concurrent User Actions",
                objective: "Verify concurrent action handling",
                category: "edge-cases",
                priority: "medium",
                preconditions: "Two users in same session",
                steps: [
                    "Both users try same action simultaneously",
                    "Check conflicts and resolution"
                ],
                expectedResult: "First action wins, clear error for second, no corruption",
                testData: []
            },
            {
                id: "TC-EC-003",
                title: "Data Validation Edge Cases",
                objective: "Verify data validation edge cases",
                category: "edge-cases",
                priority: "medium",
                preconditions: "Various form inputs",
                steps: [
                    "Test long inputs, special chars, injection attempts",
                    "Test malformed dates"
                ],
                expectedResult: "Limits enforced, special chars handled, security protected",
                testData: ["Max: 1000 chars", "XSS blocked"]
            },
            {
                id: "TC-EC-004",
                title: "Session Limit Edge Cases",
                objective: "Verify session limit enforcement",
                category: "edge-cases",
                priority: "medium",
                preconditions: "Users near session limits",
                steps: [
                    "Create 3 sessions, try 4th",
                    "Complete one, try creating new"
                ],
                expectedResult: "Limit enforced, clear error, counter updates correctly",
                testData: ["Limit: 3 active sessions per pair"]
            },
            {
                id: "TC-EC-005",
                title: "User Permission Edge Cases",
                objective: "Verify user permission handling",
                category: "edge-cases",
                priority: "high",
                preconditions: "Various user scenarios",
                steps: [
                    "Test suspended/deleted users",
                    "Test unauthorized access"
                ],
                expectedResult: "Suspended users blocked, deleted handled gracefully, unauthorized prevented",
                testData: []
            }
        ];

        let currentTests = [...testCases];

        // Initialize the form
        function initializeForm() {
            renderTestCases();
            updateSummary();
            setupEventListeners();
        }

        // Render test cases
        function renderTestCases() {
            const container = document.getElementById('testCases');
            container.innerHTML = '';

            currentTests.forEach(testCase => {
                const testElement = createTestCaseElement(testCase);
                container.appendChild(testElement);
            });
        }

        // Create test case element
        function createTestCaseElement(testCase) {
            const div = document.createElement('div');
            div.className = 'test-case';
            div.dataset.id = testCase.id;
            div.dataset.category = testCase.category;
            div.dataset.priority = testCase.priority;

            const testDataHtml = testCase.testData && testCase.testData.length > 0 ? `
                <div class="test-data">
                    <h5>Test Data:</h5>
                    <ul>
                        ${testCase.testData.map(data => `<li>${data}</li>`).join('')}
                    </ul>
                </div>
            ` : '';

            div.innerHTML = `
                <div class="test-case-header">
                    <div>
                        <div class="test-case-id">${testCase.id}</div>
                        <div class="category-badge ${testCase.category}">${testCase.category.replace('-', ' ')}</div>
                    </div>
                    <div class="priority ${testCase.priority}">${testCase.priority}</div>
                </div>
                
                <div class="test-objective">${testCase.title}: ${testCase.objective}</div>
                
                <div class="test-steps">
                    <h4>Preconditions:</h4>
                    <p>${testCase.preconditions}</p>
                    <h4>Test Steps:</h4>
                    <ol>
                        ${testCase.steps.map(step => `<li>${step}</li>`).join('')}
                    </ol>
                    <p><strong>Expected Result:</strong> ${testCase.expectedResult}</p>
                </div>

                ${testDataHtml}

                <div class="form-grid">
                    <div class="form-field">
                        <label>Execution Date:</label>
                        <input type="date" name="executionDate" value="${new Date().toISOString().split('T')[0]}">
                    </div>
                    <div class="form-field">
                        <label>Test Result:</label>
                        <input type="hidden" name="testResult" value="">
                        <div class="status-buttons">
                            <button type="button" class="status-btn pass" onclick="setStatus(this, 'pass')">PASS</button>
                            <button type="button" class="status-btn fail" onclick="setStatus(this, 'fail')">FAIL</button>
                            <button type="button" class="status-btn blocked" onclick="setStatus(this, 'blocked')">BLOCKED</button>
                        </div>
                    </div>
                    <div class="form-field">
                        <label>Actual Result:</label>
                        <textarea name="actualResult" placeholder="Describe what actually happened..."></textarea>
                    </div>
                    <div class="form-field">
                        <label>Notes:</label>
                        <textarea name="notes" placeholder="Additional notes, observations, or comments..."></textarea>
                    </div>
                    <div class="form-field">
                        <label>Bug Severity (if failed):</label>
                        <select name="bugSeverity">
                            <option value="">Select severity</option>
                            <option value="critical">Critical</option>
                            <option value="major">Major</option>
                            <option value="minor">Minor</option>
                            <option value="trivial">Trivial</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label>Execution Time (minutes):</label>
                        <input type="number" name="executionTime" placeholder="0" min="0" max="999">
                    </div>
                </div>
            `;

            return div;
        }

        // Set test status
        function setStatus(button, status) {
            const testCase = button.closest('.test-case');
            const statusButtons = testCase.querySelectorAll('.status-btn');
            const hiddenInput = testCase.querySelector('input[name="testResult"]');

            statusButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            hiddenInput.value = status;

            updateSummary();
        }

        // Update summary statistics
        function updateSummary() {
            const testCaseElements = document.querySelectorAll('.test-case');
            let total = testCaseElements.length;
            let passed = 0;
            let failed = 0;
            let blocked = 0;
            let notExecuted = 0;

            testCaseElements.forEach(testCase => {
                const result = testCase.querySelector('input[name="testResult"]').value;
                switch(result) {
                    case 'pass': passed++; break;
                    case 'fail': failed++; break;
                    case 'blocked': blocked++; break;
                    default: notExecuted++; break;
                }
            });

            const passRate = total > 0 ? Math.round((passed / total) * 100) : 0;

            document.getElementById('totalTests').textContent = total;
            document.getElementById('passedTests').textContent = passed;
            document.getElementById('failedTests').textContent = failed;
            document.getElementById('blockedTests').textContent = blocked;
            document.getElementById('notExecutedTests').textContent = notExecuted;
            document.getElementById('passRate').textContent = passRate + '%';
        }

        // Filter test cases
        function filterTestCases() {
            const category = document.getElementById('category').value;
            const priority = document.getElementById('priority').value;
            const search = document.getElementById('search').value.toLowerCase();

            const testCaseElements = document.querySelectorAll('.test-case');
            
            testCaseElements.forEach(testCase => {
                const matchesCategory = !category || testCase.dataset.category === category;
                const matchesPriority = !priority || testCase.dataset.priority === priority;
                const matchesSearch = !search || 
                    testCase.textContent.toLowerCase().includes(search) ||
                    testCase.dataset.id.toLowerCase().includes(search);

                if (matchesCategory && matchesPriority && matchesSearch) {
                    testCase.classList.remove('hidden');
                } else {
                    testCase.classList.add('hidden');
                }
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('category').addEventListener('change', filterTestCases);
            document.getElementById('priority').addEventListener('change', filterTestCases);
            document.getElementById('search').addEventListener('input', filterTestCases);
        }

        // Export results
        function exportResults() {
            const tester = document.getElementById('tester').value;
            const version = document.getElementById('version').value;
            const browser = document.getElementById('browser').value;
            const device = document.getElementById('device').value;
            const testDate = new Date().toISOString().split('T')[0];

            let csvContent = "Test Case ID,Test Name,Category,Preconditions,Test Steps,Expected Result,Actual Result,Pass/Fail Status,Execution Date,Execution Time,Tester,Browser,Device,Priority,Notes,Bug Severity\n";

            document.querySelectorAll('.test-case').forEach(testCase => {
                const id = testCase.dataset.id;
                
                // Find the test case data
                const testData = testCases.find(tc => tc.id === id);
                
                const testName = testData.title;
                const category = testData.category;
                const preconditions = testData.preconditions.replace(/"/g, '""'); // Escape quotes
                const steps = testData.steps.join('; ').replace(/"/g, '""'); // Join steps with semicolon
                const expectedResult = testData.expectedResult.replace(/"/g, '""');
                const priority = testCase.dataset.priority;
                const executionDate = testCase.querySelector('input[name="executionDate"]').value;
                const executionTime = testCase.querySelector('input[name="executionTime"]').value || '0';
                const testResult = testCase.querySelector('input[name="testResult"]').value || 'Not Executed';
                const actualResult = testCase.querySelector('textarea[name="actualResult"]').value.replace(/"/g, '""');
                const notes = testCase.querySelector('textarea[name="notes"]').value.replace(/"/g, '""');
                const bugSeverity = testCase.querySelector('select[name="bugSeverity"]').value;

                csvContent += `"${id}","${testName}","${category}","${preconditions}","${steps}","${expectedResult}","${actualResult}","${testResult}","${executionDate}","${executionTime}","${tester}","${browser}","${device}","${priority}","${notes}","${bugSeverity}"\n`;
            });

            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `session_test_results_${testDate}.csv`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Export as HTML table
        function exportAsTable() {
            const tester = document.getElementById('tester').value;
            const version = document.getElementById('version').value;
            const browser = document.getElementById('browser').value;
            const device = document.getElementById('device').value;
            const testDate = new Date().toISOString().split('T')[0];

            let htmlContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Session System Test Results - ${testDate}</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .header { background: #4f46e5; color: white; padding: 20px; margin-bottom: 20px; }
                        .meta-info { background: #f8fafc; padding: 15px; margin-bottom: 20px; border-radius: 8px; }
                        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
                        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                        th { background-color: #f2f2f2; font-weight: bold; }
                        .pass { background-color: #dcfce7; color: #16a34a; }
                        .fail { background-color: #fef2f2; color: #dc2626; }
                        .blocked { background-color: #fef3c7; color: #d97706; }
                        .not-executed { background-color: #f8fafc; color: #6b7280; }
                        .summary { background: #f0f9ff; padding: 15px; border-radius: 8px; margin-top: 20px; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>Session System Test Execution Report</h1>
                        <p>Comprehensive test results for SkillSwap Hub Session System</p>
                    </div>
                    
                    <div class="meta-info">
                        <h3>Test Execution Details</h3>
                        <p><strong>Tester:</strong> ${tester || 'Not specified'}</p>
                        <p><strong>Version:</strong> ${version || 'Not specified'}</p>
                        <p><strong>Browser:</strong> ${browser || 'Not specified'}</p>
                        <p><strong>Device:</strong> ${device || 'Not specified'}</p>
                        <p><strong>Execution Date:</strong> ${testDate}</p>
                    </div>

                    <table>
                        <thead>
                            <tr>
                                <th>Test Case ID</th>
                                <th>Test Name</th>
                                <th>Category</th>
                                <th>Priority</th>
                                <th>Expected Result</th>
                                <th>Actual Result</th>
                                <th>Status</th>
                                <th>Execution Date</th>
                                <th>Time (min)</th>
                                <th>Bug Severity</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            document.querySelectorAll('.test-case').forEach(testCase => {
                const id = testCase.dataset.id;
                const testData = testCases.find(tc => tc.id === id);
                
                const testName = testData.title;
                const category = testData.category;
                const expectedResult = testData.expectedResult;
                const priority = testCase.dataset.priority;
                const executionDate = testCase.querySelector('input[name="executionDate"]').value;
                const executionTime = testCase.querySelector('input[name="executionTime"]').value || '0';
                const testResult = testCase.querySelector('input[name="testResult"]').value || 'not-executed';
                const actualResult = testCase.querySelector('textarea[name="actualResult"]').value || 'Not executed';
                const notes = testCase.querySelector('textarea[name="notes"]').value || '-';
                const bugSeverity = testCase.querySelector('select[name="bugSeverity"]').value || '-';

                const statusClass = testResult === 'pass' ? 'pass' : 
                                  testResult === 'fail' ? 'fail' : 
                                  testResult === 'blocked' ? 'blocked' : 'not-executed';

                const statusText = testResult === 'pass' ? 'PASS' : 
                                  testResult === 'fail' ? 'FAIL' : 
                                  testResult === 'blocked' ? 'BLOCKED' : 'NOT EXECUTED';

                htmlContent += `
                    <tr>
                        <td>${id}</td>
                        <td>${testName}</td>
                        <td style="text-transform: capitalize;">${category.replace('-', ' ')}</td>
                        <td style="text-transform: uppercase;">${priority}</td>
                        <td>${expectedResult}</td>
                        <td>${actualResult}</td>
                        <td class="${statusClass}"><strong>${statusText}</strong></td>
                        <td>${executionDate}</td>
                        <td>${executionTime}</td>
                        <td>${bugSeverity}</td>
                        <td>${notes}</td>
                    </tr>
                `;
            });

            // Calculate summary
            const total = document.querySelectorAll('.test-case').length;
            const passed = document.getElementById('passedTests').textContent;
            const failed = document.getElementById('failedTests').textContent;
            const blocked = document.getElementById('blockedTests').textContent;
            const notExecuted = document.getElementById('notExecutedTests').textContent;
            const passRate = document.getElementById('passRate').textContent;

            htmlContent += `
                        </tbody>
                    </table>
                    
                    <div class="summary">
                        <h3>Test Execution Summary</h3>
                        <p><strong>Total Test Cases:</strong> ${total}</p>
                        <p><strong>Passed:</strong> ${passed}</p>
                        <p><strong>Failed:</strong> ${failed}</p>
                        <p><strong>Blocked:</strong> ${blocked}</p>
                        <p><strong>Not Executed:</strong> ${notExecuted}</p>
                        <p><strong>Pass Rate:</strong> ${passRate}</p>
                    </div>
                </body>
                </html>
            `;

            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `session_test_results_table_${testDate}.html`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Reset form
        function resetForm() {
            if (confirm('Are you sure you want to reset all test results?')) {
                document.querySelectorAll('.test-case').forEach(testCase => {
                    testCase.querySelector('input[name="testResult"]').value = '';
                    testCase.querySelector('textarea[name="actualResult"]').value = '';
                    testCase.querySelector('textarea[name="notes"]').value = '';
                    testCase.querySelector('select[name="bugSeverity"]').value = '';
                    testCase.querySelector('input[name="executionTime"]').value = '';
                    testCase.querySelectorAll('.status-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                });
                updateSummary();
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeForm);
    </script>
</body>
</html>
